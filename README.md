# tempart [![Build Status](https://travis-ci.org/plusgut/tempart.svg?branch=v0.4)](https://travis-ci.org/plusgut/tempart) [![Coverage Status](https://coveralls.io/repos/github/plusgut/tempart/badge.svg?branch=v0.4)](https://coveralls.io/github/plusgut/tempart?branch=v0.4)
Its a mustache templating engine, which is optimized for recompiling.
The precompiler returns a tree of blocks with there dependencies


api 0.4
---

```mustache
{{variable}} when only a variable should be displayed
{{#if variable}} when an mustache helper gets called
{{> "partial"}} an subtemplate can rendered too
```

```mustache
{{#if object.property && functionName(variableName, anotherVariable)}}
	{{> "logo" newName=variableName computedName=functionName(anotherVariable, variableName, "logo")}}
{{/if}}

```

```js
// This is the generated JSON which got generated, by the upper mustache template
// This JSON will get used by the compiler for generating html dynamicly
[
	{
		// calls tempartCompiler.types.if
		type: 'if',

		// Identifier of this block, generated by precompiler
		id: 1,

		// Used variables, which are used in are dependend for this block, variables with dot notation are saved in an array
		variables: [['object', 'property'], 'variableName', 'anotherVariable'],

		// Constants used for this block
		constants: ['&&'],

		// parameters for which tempartCompiler.types.if gets called
		parameters: [{
			// calls tempartCompiler.execs.variables( block, parameterBlock, globalScope, localScope)
			// block is {type: 'if', id: 1, ...}
			// parameterBlock is {exec: 'variables', value: 0}
			// globalScope is the contentBlock of the controller
			// localScope are the local rewrites, variables which are only used for the template (e.g. index of an for)
			exec: 'variables'

			// tempartCompiler.execs.variables looks in block.variables[0] the key, first in localScope, then in globalScope
			value: 0,
		}, {
			// calls tempartCompiler.execs.constants( block, parameterBlock, globalScope, localScope)
			exec: 'constants',

			// tempartCompiler.execs.consnts looks in block.conntants[0] the value
			value: 0
		}, {
			// calls tempartCompiler.execs.callee( block, parameterBlock, globalScope, localScope)
			exec: 'callee',

			// this will get called: controller.functionName(variableName, anotherVariable)
			value: 'functionName',

			// These parameters get called from inside the tempartCompiler.execs.callee, via tempartCompiler.helpers.getParameters (not recursive)
			parameters: [{
				exec: 'variables',
				value: 1
			}, {
				exec: 'variables',
				value: 2
			}]
		}],
		// Contains is an array of new blocks, which are inside the current block
		contains: [{
			type: 'partial',
			id: 0,
			variables: ['variableName', 'anotherVariable'],
			constants: ['logo', 'constant'],
			parameters: [{
				exec: 'constants',
				value: 0
			}, {
				exec: 'vaiables',
				// name is the used variableKey for the variableValue
				name: 'newname',
				value: 0
			}, {
				exec: 'callee',
				name: 'computedName',
				value: 'functionName'
				parameters: [{
					exec: 'variables',
					value: 1
				}, {
					exec: 'variables',
					value: 0
				}, {
					exec: 'constants',
					value: 0
				]
			}],
		}]
	},
]
```